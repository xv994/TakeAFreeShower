<mxfile host="app.diagrams.net" agent="Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/137.0.0.0 Safari/537.36 Edg/137.0.0.0" version="27.1.6">
  <diagram name="Page-1" id="74e2e168-ea6b-b213-b513-2b3c1d86103e">
    <mxGraphModel dx="1044" dy="727" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="1100" pageHeight="850" background="none" math="0" shadow="0">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />
        <mxCell id="02RM_RIuxm8Lg2VoAUoX-32" value="继续历史对话" style="swimlane;childLayout=stackLayout;resizeParent=1;resizeParentMax=0;startSize=20;html=1;swimlaneFillColor=none;" vertex="1" parent="1">
          <mxGeometry x="80" y="530" width="900" height="710" as="geometry" />
        </mxCell>
        <mxCell id="02RM_RIuxm8Lg2VoAUoX-50" value="用户" style="swimlane;startSize=20;html=1;" vertex="1" parent="02RM_RIuxm8Lg2VoAUoX-32">
          <mxGeometry y="20" width="180" height="690" as="geometry" />
        </mxCell>
        <mxCell id="02RM_RIuxm8Lg2VoAUoX-51" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="02RM_RIuxm8Lg2VoAUoX-50" source="02RM_RIuxm8Lg2VoAUoX-52" target="02RM_RIuxm8Lg2VoAUoX-53">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="02RM_RIuxm8Lg2VoAUoX-52" value="选择历史对话" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="02RM_RIuxm8Lg2VoAUoX-50">
          <mxGeometry x="29.999999999999545" y="60" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="02RM_RIuxm8Lg2VoAUoX-74" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" edge="1" parent="02RM_RIuxm8Lg2VoAUoX-50" source="02RM_RIuxm8Lg2VoAUoX-53" target="02RM_RIuxm8Lg2VoAUoX-73">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="02RM_RIuxm8Lg2VoAUoX-53" value="用户输入" style="whiteSpace=wrap;html=1;rounded=1;" vertex="1" parent="02RM_RIuxm8Lg2VoAUoX-50">
          <mxGeometry x="29.999999999999545" y="390" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="02RM_RIuxm8Lg2VoAUoX-73" value="对话完成" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="02RM_RIuxm8Lg2VoAUoX-50">
          <mxGeometry x="30" y="580" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="02RM_RIuxm8Lg2VoAUoX-55" value="前端" style="swimlane;startSize=20;html=1;" vertex="1" parent="02RM_RIuxm8Lg2VoAUoX-32">
          <mxGeometry x="180" y="20" width="180" height="690" as="geometry" />
        </mxCell>
        <mxCell id="02RM_RIuxm8Lg2VoAUoX-56" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="02RM_RIuxm8Lg2VoAUoX-55" target="02RM_RIuxm8Lg2VoAUoX-58">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="89.99999999999955" y="400" as="sourcePoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="02RM_RIuxm8Lg2VoAUoX-59" value="传递 session id" style="whiteSpace=wrap;html=1;rounded=1;" vertex="1" parent="02RM_RIuxm8Lg2VoAUoX-55">
          <mxGeometry x="29.999999999999545" y="60" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="02RM_RIuxm8Lg2VoAUoX-66" value="呈现历史对话" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="02RM_RIuxm8Lg2VoAUoX-55">
          <mxGeometry x="30" y="200" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="02RM_RIuxm8Lg2VoAUoX-70" value="呈现回答" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="02RM_RIuxm8Lg2VoAUoX-55">
          <mxGeometry x="30" y="480" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="02RM_RIuxm8Lg2VoAUoX-33" value="大模型" style="swimlane;startSize=20;html=1;" vertex="1" parent="02RM_RIuxm8Lg2VoAUoX-32">
          <mxGeometry x="360" y="20" width="180" height="690" as="geometry" />
        </mxCell>
        <mxCell id="02RM_RIuxm8Lg2VoAUoX-34" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="02RM_RIuxm8Lg2VoAUoX-33" source="02RM_RIuxm8Lg2VoAUoX-35" target="02RM_RIuxm8Lg2VoAUoX-36">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="02RM_RIuxm8Lg2VoAUoX-35" value="流式生成回答" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="02RM_RIuxm8Lg2VoAUoX-33">
          <mxGeometry x="30" y="390" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="02RM_RIuxm8Lg2VoAUoX-72" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0;exitY=0.5;exitDx=0;exitDy=0;" edge="1" parent="02RM_RIuxm8Lg2VoAUoX-33" source="02RM_RIuxm8Lg2VoAUoX-36">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="-210" y="610" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="02RM_RIuxm8Lg2VoAUoX-36" value="流式输出完成" style="whiteSpace=wrap;html=1;rounded=1;" vertex="1" parent="02RM_RIuxm8Lg2VoAUoX-33">
          <mxGeometry x="30" y="580" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="02RM_RIuxm8Lg2VoAUoX-37" value="同步数据库" style="swimlane;startSize=20;html=1;strokeColor=default;align=center;verticalAlign=middle;fontFamily=Helvetica;fontSize=12;fontColor=default;fontStyle=1;fillColor=default;" vertex="1" parent="02RM_RIuxm8Lg2VoAUoX-32">
          <mxGeometry x="540" y="20" width="180" height="690" as="geometry" />
        </mxCell>
        <mxCell id="02RM_RIuxm8Lg2VoAUoX-38" value="&lt;span style=&quot;font-weight: 400;&quot;&gt;记录流式输出&lt;/span&gt;" style="whiteSpace=wrap;html=1;rounded=1;strokeColor=default;align=center;verticalAlign=middle;fontFamily=Helvetica;fontSize=12;fontColor=default;fontStyle=1;fillColor=default;" vertex="1" parent="02RM_RIuxm8Lg2VoAUoX-37">
          <mxGeometry x="30" y="390" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="02RM_RIuxm8Lg2VoAUoX-39" value="发送数据给历史信息数据库" style="whiteSpace=wrap;html=1;rounded=1;" vertex="1" parent="02RM_RIuxm8Lg2VoAUoX-37">
          <mxGeometry x="29.999999999999545" y="580" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="02RM_RIuxm8Lg2VoAUoX-40" value="历史信息数据库" style="swimlane;startSize=20;html=1;strokeColor=default;align=center;verticalAlign=middle;fontFamily=Helvetica;fontSize=12;fontColor=default;fontStyle=1;fillColor=default;" vertex="1" parent="02RM_RIuxm8Lg2VoAUoX-32">
          <mxGeometry x="720" y="20" width="180" height="690" as="geometry" />
        </mxCell>
        <mxCell id="02RM_RIuxm8Lg2VoAUoX-41" value="将 chunk 进行整理并落盘" style="whiteSpace=wrap;html=1;rounded=1;" vertex="1" parent="02RM_RIuxm8Lg2VoAUoX-40">
          <mxGeometry x="29.999999999999545" y="580" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="02RM_RIuxm8Lg2VoAUoX-64" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="02RM_RIuxm8Lg2VoAUoX-40" source="02RM_RIuxm8Lg2VoAUoX-61" target="02RM_RIuxm8Lg2VoAUoX-63">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="02RM_RIuxm8Lg2VoAUoX-61" value="查询历史信息数据" style="whiteSpace=wrap;html=1;rounded=1;" vertex="1" parent="02RM_RIuxm8Lg2VoAUoX-40">
          <mxGeometry x="30" y="60" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="02RM_RIuxm8Lg2VoAUoX-65" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="02RM_RIuxm8Lg2VoAUoX-40" source="02RM_RIuxm8Lg2VoAUoX-63">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="-390" y="230" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="02RM_RIuxm8Lg2VoAUoX-113" value="history" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" vertex="1" connectable="0" parent="02RM_RIuxm8Lg2VoAUoX-65">
          <mxGeometry x="0.1502" y="-3" relative="1" as="geometry">
            <mxPoint y="-7" as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="02RM_RIuxm8Lg2VoAUoX-63" value="返回数据给前端" style="whiteSpace=wrap;html=1;rounded=1;" vertex="1" parent="02RM_RIuxm8Lg2VoAUoX-40">
          <mxGeometry x="30" y="200" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="02RM_RIuxm8Lg2VoAUoX-42" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="02RM_RIuxm8Lg2VoAUoX-32" source="02RM_RIuxm8Lg2VoAUoX-35" target="02RM_RIuxm8Lg2VoAUoX-38">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="02RM_RIuxm8Lg2VoAUoX-43" value="answer chunk" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" vertex="1" connectable="0" parent="02RM_RIuxm8Lg2VoAUoX-42">
          <mxGeometry x="-0.2333" y="-2" relative="1" as="geometry">
            <mxPoint x="7" y="-17" as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="02RM_RIuxm8Lg2VoAUoX-44" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="02RM_RIuxm8Lg2VoAUoX-32" source="02RM_RIuxm8Lg2VoAUoX-36" target="02RM_RIuxm8Lg2VoAUoX-39">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="02RM_RIuxm8Lg2VoAUoX-45" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="02RM_RIuxm8Lg2VoAUoX-32" source="02RM_RIuxm8Lg2VoAUoX-39" target="02RM_RIuxm8Lg2VoAUoX-41">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="02RM_RIuxm8Lg2VoAUoX-46" value="chunk list" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" vertex="1" connectable="0" parent="02RM_RIuxm8Lg2VoAUoX-45">
          <mxGeometry x="-0.4" relative="1" as="geometry">
            <mxPoint x="12" y="-15" as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="02RM_RIuxm8Lg2VoAUoX-60" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="02RM_RIuxm8Lg2VoAUoX-32" source="02RM_RIuxm8Lg2VoAUoX-52" target="02RM_RIuxm8Lg2VoAUoX-59">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="02RM_RIuxm8Lg2VoAUoX-62" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="02RM_RIuxm8Lg2VoAUoX-32" source="02RM_RIuxm8Lg2VoAUoX-59" target="02RM_RIuxm8Lg2VoAUoX-61">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="02RM_RIuxm8Lg2VoAUoX-112" value="session id" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" vertex="1" connectable="0" parent="02RM_RIuxm8Lg2VoAUoX-62">
          <mxGeometry x="0.0728" y="-3" relative="1" as="geometry">
            <mxPoint x="-45" y="-13" as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="02RM_RIuxm8Lg2VoAUoX-67" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" edge="1" parent="02RM_RIuxm8Lg2VoAUoX-32" source="02RM_RIuxm8Lg2VoAUoX-53" target="02RM_RIuxm8Lg2VoAUoX-35">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="02RM_RIuxm8Lg2VoAUoX-68" value="query" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" vertex="1" connectable="0" parent="02RM_RIuxm8Lg2VoAUoX-67">
          <mxGeometry x="0.1536" y="1" relative="1" as="geometry">
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="02RM_RIuxm8Lg2VoAUoX-69" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.25;exitY=1;exitDx=0;exitDy=0;entryX=1;entryY=0.5;entryDx=0;entryDy=0;" edge="1" parent="02RM_RIuxm8Lg2VoAUoX-32" source="02RM_RIuxm8Lg2VoAUoX-35" target="02RM_RIuxm8Lg2VoAUoX-70">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="260" y="510" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="02RM_RIuxm8Lg2VoAUoX-71" value="answer chunk" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" vertex="1" connectable="0" parent="02RM_RIuxm8Lg2VoAUoX-69">
          <mxGeometry x="-0.5857" relative="1" as="geometry">
            <mxPoint x="-40" y="21" as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="02RM_RIuxm8Lg2VoAUoX-75" value="新对话" style="swimlane;childLayout=stackLayout;resizeParent=1;resizeParentMax=0;startSize=20;html=1;swimlaneFillColor=none;" vertex="1" parent="1">
          <mxGeometry x="80" y="80" width="900" height="370" as="geometry" />
        </mxCell>
        <mxCell id="02RM_RIuxm8Lg2VoAUoX-76" value="用户" style="swimlane;startSize=20;html=1;" vertex="1" parent="02RM_RIuxm8Lg2VoAUoX-75">
          <mxGeometry y="20" width="180" height="350" as="geometry" />
        </mxCell>
        <mxCell id="02RM_RIuxm8Lg2VoAUoX-79" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" edge="1" parent="02RM_RIuxm8Lg2VoAUoX-76" source="02RM_RIuxm8Lg2VoAUoX-80" target="02RM_RIuxm8Lg2VoAUoX-81">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="02RM_RIuxm8Lg2VoAUoX-80" value="用户输入" style="whiteSpace=wrap;html=1;rounded=1;" vertex="1" parent="02RM_RIuxm8Lg2VoAUoX-76">
          <mxGeometry x="29.999999999999545" y="50" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="02RM_RIuxm8Lg2VoAUoX-81" value="对话完成" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="02RM_RIuxm8Lg2VoAUoX-76">
          <mxGeometry x="30" y="240" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="02RM_RIuxm8Lg2VoAUoX-82" value="前端" style="swimlane;startSize=20;html=1;" vertex="1" parent="02RM_RIuxm8Lg2VoAUoX-75">
          <mxGeometry x="180" y="20" width="180" height="350" as="geometry" />
        </mxCell>
        <mxCell id="02RM_RIuxm8Lg2VoAUoX-83" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="02RM_RIuxm8Lg2VoAUoX-82">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="89.99999999999955" y="400" as="sourcePoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="02RM_RIuxm8Lg2VoAUoX-86" value="呈现回答" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="02RM_RIuxm8Lg2VoAUoX-82">
          <mxGeometry x="20" y="145.45" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="02RM_RIuxm8Lg2VoAUoX-87" value="大模型" style="swimlane;startSize=20;html=1;" vertex="1" parent="02RM_RIuxm8Lg2VoAUoX-75">
          <mxGeometry x="360" y="20" width="180" height="350" as="geometry" />
        </mxCell>
        <mxCell id="02RM_RIuxm8Lg2VoAUoX-88" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="02RM_RIuxm8Lg2VoAUoX-87" source="02RM_RIuxm8Lg2VoAUoX-89" target="02RM_RIuxm8Lg2VoAUoX-91">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="02RM_RIuxm8Lg2VoAUoX-89" value="流式生成回答" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="02RM_RIuxm8Lg2VoAUoX-87">
          <mxGeometry x="30" y="50.44999999999999" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="02RM_RIuxm8Lg2VoAUoX-91" value="流式输出完成" style="whiteSpace=wrap;html=1;rounded=1;" vertex="1" parent="02RM_RIuxm8Lg2VoAUoX-87">
          <mxGeometry x="30" y="240.45" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="02RM_RIuxm8Lg2VoAUoX-101" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="02RM_RIuxm8Lg2VoAUoX-87" source="02RM_RIuxm8Lg2VoAUoX-89">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="210" y="80.44999999999999" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="02RM_RIuxm8Lg2VoAUoX-102" value="answer chunk" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" vertex="1" connectable="0" parent="02RM_RIuxm8Lg2VoAUoX-101">
          <mxGeometry x="-0.2333" y="-2" relative="1" as="geometry">
            <mxPoint x="7" y="-17" as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="02RM_RIuxm8Lg2VoAUoX-103" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="02RM_RIuxm8Lg2VoAUoX-87" source="02RM_RIuxm8Lg2VoAUoX-91">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="209.99999999999955" y="270.44999999999976" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="02RM_RIuxm8Lg2VoAUoX-92" value="同步数据库" style="swimlane;startSize=20;html=1;strokeColor=default;align=center;verticalAlign=middle;fontFamily=Helvetica;fontSize=12;fontColor=default;fontStyle=1;fillColor=default;" vertex="1" parent="02RM_RIuxm8Lg2VoAUoX-75">
          <mxGeometry x="540" y="20" width="180" height="350" as="geometry" />
        </mxCell>
        <mxCell id="02RM_RIuxm8Lg2VoAUoX-93" value="&lt;span style=&quot;font-weight: 400;&quot;&gt;记录流式输出&lt;/span&gt;" style="whiteSpace=wrap;html=1;rounded=1;strokeColor=default;align=center;verticalAlign=middle;fontFamily=Helvetica;fontSize=12;fontColor=default;fontStyle=1;fillColor=default;" vertex="1" parent="02RM_RIuxm8Lg2VoAUoX-92">
          <mxGeometry x="30" y="50" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="02RM_RIuxm8Lg2VoAUoX-94" value="发送数据给历史信息数据库" style="whiteSpace=wrap;html=1;rounded=1;" vertex="1" parent="02RM_RIuxm8Lg2VoAUoX-92">
          <mxGeometry x="29.999999999999545" y="240" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="02RM_RIuxm8Lg2VoAUoX-95" value="历史信息数据库" style="swimlane;startSize=20;html=1;strokeColor=default;align=center;verticalAlign=middle;fontFamily=Helvetica;fontSize=12;fontColor=default;fontStyle=1;fillColor=default;" vertex="1" parent="02RM_RIuxm8Lg2VoAUoX-75">
          <mxGeometry x="720" y="20" width="180" height="350" as="geometry" />
        </mxCell>
        <mxCell id="02RM_RIuxm8Lg2VoAUoX-96" value="将 chunk 进行整理并落盘" style="whiteSpace=wrap;html=1;rounded=1;" vertex="1" parent="02RM_RIuxm8Lg2VoAUoX-95">
          <mxGeometry x="29.999999999999545" y="240.45" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="02RM_RIuxm8Lg2VoAUoX-104" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="02RM_RIuxm8Lg2VoAUoX-75" source="02RM_RIuxm8Lg2VoAUoX-94" target="02RM_RIuxm8Lg2VoAUoX-96">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="02RM_RIuxm8Lg2VoAUoX-105" value="chunk list" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" vertex="1" connectable="0" parent="02RM_RIuxm8Lg2VoAUoX-104">
          <mxGeometry x="-0.4" relative="1" as="geometry">
            <mxPoint x="12" y="-15" as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="02RM_RIuxm8Lg2VoAUoX-108" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" edge="1" parent="02RM_RIuxm8Lg2VoAUoX-75" source="02RM_RIuxm8Lg2VoAUoX-80" target="02RM_RIuxm8Lg2VoAUoX-89">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="02RM_RIuxm8Lg2VoAUoX-109" value="query" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" vertex="1" connectable="0" parent="02RM_RIuxm8Lg2VoAUoX-108">
          <mxGeometry x="0.1536" y="1" relative="1" as="geometry">
            <mxPoint x="-28" y="-9" as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="02RM_RIuxm8Lg2VoAUoX-110" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.25;exitY=1;exitDx=0;exitDy=0;entryX=1;entryY=0.5;entryDx=0;entryDy=0;" edge="1" parent="02RM_RIuxm8Lg2VoAUoX-75" source="02RM_RIuxm8Lg2VoAUoX-89" target="02RM_RIuxm8Lg2VoAUoX-86">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="260" y="510" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="02RM_RIuxm8Lg2VoAUoX-111" value="answer chunk" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" vertex="1" connectable="0" parent="02RM_RIuxm8Lg2VoAUoX-110">
          <mxGeometry x="-0.5857" relative="1" as="geometry">
            <mxPoint x="-40" y="21" as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="02RM_RIuxm8Lg2VoAUoX-90" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0;exitY=0.5;exitDx=0;exitDy=0;entryX=1;entryY=0.5;entryDx=0;entryDy=0;" edge="1" parent="02RM_RIuxm8Lg2VoAUoX-75" source="02RM_RIuxm8Lg2VoAUoX-91" target="02RM_RIuxm8Lg2VoAUoX-81">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="150" y="630" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="02RM_RIuxm8Lg2VoAUoX-114" value="对话更改" style="swimlane;childLayout=stackLayout;resizeParent=1;resizeParentMax=0;startSize=20;html=1;swimlaneFillColor=none;" vertex="1" parent="1">
          <mxGeometry x="80" y="1370" width="900" height="810" as="geometry" />
        </mxCell>
        <mxCell id="02RM_RIuxm8Lg2VoAUoX-115" value="用户" style="swimlane;startSize=20;html=1;" vertex="1" parent="02RM_RIuxm8Lg2VoAUoX-114">
          <mxGeometry y="20" width="180" height="790" as="geometry" />
        </mxCell>
        <mxCell id="02RM_RIuxm8Lg2VoAUoX-116" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="02RM_RIuxm8Lg2VoAUoX-115" source="02RM_RIuxm8Lg2VoAUoX-117" target="02RM_RIuxm8Lg2VoAUoX-119">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="02RM_RIuxm8Lg2VoAUoX-117" value="选择历史对话" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="02RM_RIuxm8Lg2VoAUoX-115">
          <mxGeometry x="29.999999999999545" y="60" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="02RM_RIuxm8Lg2VoAUoX-118" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" edge="1" parent="02RM_RIuxm8Lg2VoAUoX-115" source="02RM_RIuxm8Lg2VoAUoX-119" target="02RM_RIuxm8Lg2VoAUoX-120">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="02RM_RIuxm8Lg2VoAUoX-119" value="用户修改对话，重新发送" style="whiteSpace=wrap;html=1;rounded=1;" vertex="1" parent="02RM_RIuxm8Lg2VoAUoX-115">
          <mxGeometry x="29.999999999999545" y="390" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="02RM_RIuxm8Lg2VoAUoX-120" value="对话完成" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="02RM_RIuxm8Lg2VoAUoX-115">
          <mxGeometry x="30" y="650" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="02RM_RIuxm8Lg2VoAUoX-121" value="前端" style="swimlane;startSize=20;html=1;" vertex="1" parent="02RM_RIuxm8Lg2VoAUoX-114">
          <mxGeometry x="180" y="20" width="180" height="790" as="geometry" />
        </mxCell>
        <mxCell id="02RM_RIuxm8Lg2VoAUoX-122" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="02RM_RIuxm8Lg2VoAUoX-121">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="89.99999999999955" y="400" as="sourcePoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="02RM_RIuxm8Lg2VoAUoX-123" value="传递 session id" style="whiteSpace=wrap;html=1;rounded=1;" vertex="1" parent="02RM_RIuxm8Lg2VoAUoX-121">
          <mxGeometry x="29.999999999999545" y="60" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="02RM_RIuxm8Lg2VoAUoX-124" value="呈现历史对话" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="02RM_RIuxm8Lg2VoAUoX-121">
          <mxGeometry x="30" y="200" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="02RM_RIuxm8Lg2VoAUoX-125" value="呈现回答" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="02RM_RIuxm8Lg2VoAUoX-121">
          <mxGeometry x="30" y="530" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="02RM_RIuxm8Lg2VoAUoX-155" value="发送 Message id" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="02RM_RIuxm8Lg2VoAUoX-121">
          <mxGeometry x="30" y="390" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="02RM_RIuxm8Lg2VoAUoX-126" value="大模型" style="swimlane;startSize=20;html=1;" vertex="1" parent="02RM_RIuxm8Lg2VoAUoX-114">
          <mxGeometry x="360" y="20" width="180" height="790" as="geometry" />
        </mxCell>
        <mxCell id="02RM_RIuxm8Lg2VoAUoX-127" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="02RM_RIuxm8Lg2VoAUoX-126" source="02RM_RIuxm8Lg2VoAUoX-128" target="02RM_RIuxm8Lg2VoAUoX-130">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="02RM_RIuxm8Lg2VoAUoX-128" value="流式生成回答" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="02RM_RIuxm8Lg2VoAUoX-126">
          <mxGeometry x="30" y="460" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="02RM_RIuxm8Lg2VoAUoX-130" value="流式输出完成" style="whiteSpace=wrap;html=1;rounded=1;" vertex="1" parent="02RM_RIuxm8Lg2VoAUoX-126">
          <mxGeometry x="30" y="650" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="02RM_RIuxm8Lg2VoAUoX-131" value="同步数据库" style="swimlane;startSize=20;html=1;strokeColor=default;align=center;verticalAlign=middle;fontFamily=Helvetica;fontSize=12;fontColor=default;fontStyle=1;fillColor=default;" vertex="1" parent="02RM_RIuxm8Lg2VoAUoX-114">
          <mxGeometry x="540" y="20" width="180" height="790" as="geometry" />
        </mxCell>
        <mxCell id="02RM_RIuxm8Lg2VoAUoX-132" value="&lt;span style=&quot;font-weight: 400;&quot;&gt;记录流式输出&lt;/span&gt;" style="whiteSpace=wrap;html=1;rounded=1;strokeColor=default;align=center;verticalAlign=middle;fontFamily=Helvetica;fontSize=12;fontColor=default;fontStyle=1;fillColor=default;" vertex="1" parent="02RM_RIuxm8Lg2VoAUoX-131">
          <mxGeometry x="30" y="460" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="02RM_RIuxm8Lg2VoAUoX-133" value="发送数据给历史信息数据库" style="whiteSpace=wrap;html=1;rounded=1;" vertex="1" parent="02RM_RIuxm8Lg2VoAUoX-131">
          <mxGeometry x="29.999999999999545" y="650" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="02RM_RIuxm8Lg2VoAUoX-134" value="历史信息数据库" style="swimlane;startSize=20;html=1;strokeColor=default;align=center;verticalAlign=middle;fontFamily=Helvetica;fontSize=12;fontColor=default;fontStyle=1;fillColor=default;" vertex="1" parent="02RM_RIuxm8Lg2VoAUoX-114">
          <mxGeometry x="720" y="20" width="180" height="790" as="geometry" />
        </mxCell>
        <mxCell id="02RM_RIuxm8Lg2VoAUoX-135" value="将 chunk 进行整理并落盘" style="whiteSpace=wrap;html=1;rounded=1;" vertex="1" parent="02RM_RIuxm8Lg2VoAUoX-134">
          <mxGeometry x="29.999999999999545" y="650" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="02RM_RIuxm8Lg2VoAUoX-136" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="02RM_RIuxm8Lg2VoAUoX-134" source="02RM_RIuxm8Lg2VoAUoX-137" target="02RM_RIuxm8Lg2VoAUoX-140">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="02RM_RIuxm8Lg2VoAUoX-137" value="查询历史信息数据" style="whiteSpace=wrap;html=1;rounded=1;" vertex="1" parent="02RM_RIuxm8Lg2VoAUoX-134">
          <mxGeometry x="30" y="60" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="02RM_RIuxm8Lg2VoAUoX-138" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="02RM_RIuxm8Lg2VoAUoX-134" source="02RM_RIuxm8Lg2VoAUoX-140">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="-390" y="230" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="02RM_RIuxm8Lg2VoAUoX-139" value="history" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" vertex="1" connectable="0" parent="02RM_RIuxm8Lg2VoAUoX-138">
          <mxGeometry x="0.1502" y="-3" relative="1" as="geometry">
            <mxPoint y="-7" as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="02RM_RIuxm8Lg2VoAUoX-140" value="返回数据给前端" style="whiteSpace=wrap;html=1;rounded=1;" vertex="1" parent="02RM_RIuxm8Lg2VoAUoX-134">
          <mxGeometry x="30" y="200" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="02RM_RIuxm8Lg2VoAUoX-154" value="重置历史信息" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="02RM_RIuxm8Lg2VoAUoX-134">
          <mxGeometry x="30" y="390" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="02RM_RIuxm8Lg2VoAUoX-141" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="02RM_RIuxm8Lg2VoAUoX-114" source="02RM_RIuxm8Lg2VoAUoX-128" target="02RM_RIuxm8Lg2VoAUoX-132">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="02RM_RIuxm8Lg2VoAUoX-142" value="answer chunk" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" vertex="1" connectable="0" parent="02RM_RIuxm8Lg2VoAUoX-141">
          <mxGeometry x="-0.2333" y="-2" relative="1" as="geometry">
            <mxPoint x="7" y="-17" as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="02RM_RIuxm8Lg2VoAUoX-143" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="02RM_RIuxm8Lg2VoAUoX-114" source="02RM_RIuxm8Lg2VoAUoX-130" target="02RM_RIuxm8Lg2VoAUoX-133">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="02RM_RIuxm8Lg2VoAUoX-144" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="02RM_RIuxm8Lg2VoAUoX-114" source="02RM_RIuxm8Lg2VoAUoX-133" target="02RM_RIuxm8Lg2VoAUoX-135">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="02RM_RIuxm8Lg2VoAUoX-145" value="chunk list" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" vertex="1" connectable="0" parent="02RM_RIuxm8Lg2VoAUoX-144">
          <mxGeometry x="-0.4" relative="1" as="geometry">
            <mxPoint x="12" y="-15" as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="02RM_RIuxm8Lg2VoAUoX-146" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="02RM_RIuxm8Lg2VoAUoX-114" source="02RM_RIuxm8Lg2VoAUoX-117" target="02RM_RIuxm8Lg2VoAUoX-123">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="02RM_RIuxm8Lg2VoAUoX-147" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="02RM_RIuxm8Lg2VoAUoX-114" source="02RM_RIuxm8Lg2VoAUoX-123" target="02RM_RIuxm8Lg2VoAUoX-137">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="02RM_RIuxm8Lg2VoAUoX-148" value="session id" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" vertex="1" connectable="0" parent="02RM_RIuxm8Lg2VoAUoX-147">
          <mxGeometry x="0.0728" y="-3" relative="1" as="geometry">
            <mxPoint x="-45" y="-13" as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="02RM_RIuxm8Lg2VoAUoX-149" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.75;exitY=1;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" edge="1" parent="02RM_RIuxm8Lg2VoAUoX-114" source="02RM_RIuxm8Lg2VoAUoX-119" target="02RM_RIuxm8Lg2VoAUoX-128">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="02RM_RIuxm8Lg2VoAUoX-150" value="query" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" vertex="1" connectable="0" parent="02RM_RIuxm8Lg2VoAUoX-149">
          <mxGeometry x="0.1536" y="1" relative="1" as="geometry">
            <mxPoint x="1" y="-19" as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="02RM_RIuxm8Lg2VoAUoX-151" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.25;exitY=1;exitDx=0;exitDy=0;entryX=1;entryY=0.5;entryDx=0;entryDy=0;" edge="1" parent="02RM_RIuxm8Lg2VoAUoX-114" source="02RM_RIuxm8Lg2VoAUoX-128" target="02RM_RIuxm8Lg2VoAUoX-125">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="260" y="510" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="02RM_RIuxm8Lg2VoAUoX-152" value="answer chunk" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" vertex="1" connectable="0" parent="02RM_RIuxm8Lg2VoAUoX-151">
          <mxGeometry x="-0.5857" relative="1" as="geometry">
            <mxPoint x="-40" y="21" as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="02RM_RIuxm8Lg2VoAUoX-129" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0;exitY=0.5;exitDx=0;exitDy=0;" edge="1" parent="02RM_RIuxm8Lg2VoAUoX-114" source="02RM_RIuxm8Lg2VoAUoX-130" target="02RM_RIuxm8Lg2VoAUoX-120">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="150" y="630" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="02RM_RIuxm8Lg2VoAUoX-153" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;" edge="1" parent="02RM_RIuxm8Lg2VoAUoX-114" source="02RM_RIuxm8Lg2VoAUoX-155" target="02RM_RIuxm8Lg2VoAUoX-154">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="560" y="440" as="targetPoint" />
            <mxPoint x="340" y="440" as="sourcePoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="02RM_RIuxm8Lg2VoAUoX-156" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" edge="1" parent="02RM_RIuxm8Lg2VoAUoX-114" source="02RM_RIuxm8Lg2VoAUoX-119" target="02RM_RIuxm8Lg2VoAUoX-155">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
      </root>
    </mxGraphModel>
  </diagram>
</mxfile>
